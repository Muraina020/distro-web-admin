import { Link, useLocation, useNavigate } from "react-router-dom";
import logo from "../../assets/img/distro-logo.png";
import Container from "../ui/Container";
import React, { useState } from 'react';
import {
  Popover,
  PopoverTrigger,
  PopoverContent,
  PopoverHeader,
  PopoverBody,
} from "@chakra-ui/react";
import Ratingpage from "../ratingPage/Ratingpage";

const Header = () => {
  const [isPageVisible, setIsPageVisible] = useState(false);
  const navigate = useNavigate();

  const handleButtonClick = () => {
    // Check if the page is currently visible
    if (isPageVisible) {
      // If visible, hide the page
      setIsPageVisible(false);
    } else {
      // If not visible, show the page
      setIsPageVisible(true);
      // You can also navigate to a different page here if needed
      navigate('/rating');
    }
  };
  const location = useLocation();
  const showFilterIcon = [
    "/expressOrderHistory",
    "/scheduleOrderHistory",
  ].includes(location.pathname);

  return (
    <header className=" py-6 px-11 sticky left-0 w-full top-0 bg-background z-20 ">
      <Container>
        <div className="flex items-center justify-between">
          <div className="logo w-[9.70575rem] h-[3.28713rem]">
            <img src={logo} alt="distor logo" />
          </div>

          <div className="max-w-[366px] w-full flex items-center bg-white rounded-[48px] p-1 pr-3">
            <button className="pl-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
              >
                <g clipPath="url(#clip0_1403_8372)">
                  <path
                    d="M15.4996 14.0001H14.7096L14.4296 13.7301C15.6296 12.3301 16.2496 10.4201 15.9096 8.39014C15.4396 5.61014 13.1196 3.39014 10.3196 3.05014C6.08965 2.53014 2.52965 6.09014 3.04965 10.3201C3.38965 13.1201 5.60965 15.4401 8.38965 15.9101C10.4196 16.2501 12.3296 15.6301 13.7296 14.4301L13.9996 14.7101V15.5001L18.2496 19.7501C18.6596 20.1601 19.3296 20.1601 19.7396 19.7501C20.1496 19.3401 20.1496 18.6701 19.7396 18.2601L15.4996 14.0001ZM9.49965 14.0001C7.00965 14.0001 4.99965 11.9901 4.99965 9.50014C4.99965 7.01014 7.00965 5.00014 9.49965 5.00014C11.9896 5.00014 13.9996 7.01014 13.9996 9.50014C13.9996 11.9901 11.9896 14.0001 9.49965 14.0001Z"
                    fill="#6C8B64"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_1403_8372">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </button>
            <input
              type="text"
              placeholder="Search "
              className="w-full outline-none p-2 rounded-[48px]"
            />
            {showFilterIcon && (
              <Popover>
                <PopoverTrigger>
                  <button className="bg-transparent p-1 rounded-lg hover:bg-gray-50 transition-all">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M1.5 6.75H22.5M5.25 12H18.75M9.75 17.25H14.25"
                        stroke="#696969"
                        strokeWidth="2"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                      />
                    </svg>
                  </button>
                </PopoverTrigger>
                <PopoverContent w="14.6875rem">
                  <PopoverHeader px={"1rem"}>Filter by:</PopoverHeader>
                  <PopoverBody>
                    <ul>
                      <li className="w-full hover:bg-gray-50 transition-all rounded-lg">
                        <button className="w-full  py-2 text-left px-2">
                          Date
                        </button>
                      </li>
                      <li className="w-full hover:bg-gray-50 transition-all rounded-lg">
                        <button className="w-full  py-2 text-left px-2">
                          Driver ID
                        </button>
                      </li>
                      <li className="w-full hover:bg-gray-50 transition-all rounded-lg">
                        <button className="w-full  py-2 text-left px-2">
                          Customer ID
                        </button>
                      </li>
                    </ul>
                  </PopoverBody>
                </PopoverContent>
              </Popover>
            )}
          </div>

          <ul className="flex gap-x-3">
            <li>
              <Link to={"/chat"}>
                <button>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="33"
                    height="33"
                    viewBox="0 0 33 33"
                    fill="none"
                  >
                    <path
                      d="M4.07786 29.3543L9.06086 27.6925L9.933 28.1286C11.9366 29.128 14.1641 29.6607 16.5 29.6607C24.3021 29.6607 30.6429 23.518 30.6429 16.6964C30.6429 9.87486 24.3021 3.73214 16.5 3.73214C8.69786 3.73214 2.35714 9.87486 2.35714 16.6964C2.35714 19.2421 3.27643 21.8256 4.9665 24.0342L5.77971 25.0949L4.0755 29.3519L4.07786 29.3543ZM2.41136 32.395C2.19805 32.4665 1.96875 32.4754 1.75053 32.4207C1.53232 32.3661 1.3343 32.2501 1.17988 32.0865C1.02547 31.9229 0.921092 31.7185 0.87909 31.4975C0.837089 31.2765 0.859216 31.0481 0.942857 30.8393L3.09257 25.465C1.13143 22.8957 0 19.822 0 16.6964C0 8.88486 7.07143 1.375 16.5 1.375C25.9286 1.375 33 8.88486 33 16.6964C33 24.508 25.9286 32.0179 16.5 32.0179C13.8557 32.0253 11.2462 31.4151 8.87936 30.2359L2.41136 32.3926V32.395Z"
                      fill="#00A69C"
                    />
                    <path
                      d="M4.07786 29.3543L9.06086 27.6925L9.933 28.1286C11.9366 29.128 14.1641 29.6607 16.5 29.6607C24.3021 29.6607 30.6429 23.518 30.6429 16.6964C30.6429 9.87486 24.3021 3.73214 16.5 3.73214C8.69786 3.73214 2.35714 9.87486 2.35714 16.6964C2.35714 19.2421 3.27643 21.8256 4.9665 24.0342L5.77971 25.0949L4.0755 29.3519L4.07786 29.3543Z"
                      fill="#00A69C"
                    />
                    <path
                      d="M16.5001 18.582C16.2525 18.582 16.0073 18.5332 15.7785 18.4384C15.5497 18.3437 15.3418 18.2048 15.1667 18.0297C14.9916 17.8546 14.8527 17.6467 14.7579 17.4179C14.6632 17.1891 14.6144 16.9439 14.6144 16.6963C14.6144 16.4486 14.6632 16.2034 14.7579 15.9746C14.8527 15.7458 14.9916 15.538 15.1667 15.3629C15.3418 15.1878 15.5497 15.0489 15.7785 14.9541C16.0073 14.8593 16.2525 14.8105 16.5001 14.8105C17.0002 14.8105 17.4799 15.0092 17.8335 15.3629C18.1872 15.7165 18.3858 16.1961 18.3858 16.6963C18.3858 17.1964 18.1872 17.676 17.8335 18.0297C17.4799 18.3833 17.0002 18.582 16.5001 18.582ZM23.5715 18.582C23.3239 18.582 23.0787 18.5332 22.8499 18.4384C22.6211 18.3437 22.4132 18.2048 22.2381 18.0297C22.063 17.8546 21.9241 17.6467 21.8294 17.4179C21.7346 17.1891 21.6858 16.9439 21.6858 16.6963C21.6858 16.4486 21.7346 16.2034 21.8294 15.9746C21.9241 15.7458 22.063 15.538 22.2381 15.3629C22.4132 15.1878 22.6211 15.0489 22.8499 14.9541C23.0787 14.8593 23.3239 14.8105 23.5715 14.8105C24.0717 14.8105 24.5513 15.0092 24.9049 15.3629C25.2586 15.7165 25.4573 16.1961 25.4573 16.6963C25.4573 17.1964 25.2586 17.676 24.9049 18.0297C24.5513 18.3833 24.0717 18.582 23.5715 18.582ZM9.42868 18.582C9.18105 18.582 8.93584 18.5332 8.70705 18.4384C8.47827 18.3437 8.27039 18.2048 8.09528 18.0297C7.92018 17.8546 7.78128 17.6467 7.68651 17.4179C7.59174 17.1891 7.54297 16.9439 7.54297 16.6963C7.54297 16.4486 7.59174 16.2034 7.68651 15.9746C7.78128 15.7458 7.92018 15.538 8.09528 15.3629C8.27039 15.1878 8.47827 15.0489 8.70705 14.9541C8.93584 14.8593 9.18105 14.8105 9.42868 14.8105C9.92881 14.8105 10.4084 15.0092 10.7621 15.3629C11.1157 15.7165 11.3144 16.1961 11.3144 16.6963C11.3144 17.1964 11.1157 17.676 10.7621 18.0297C10.4084 18.3833 9.92881 18.582 9.42868 18.582Z"
                      fill="white"
                    />
                  </svg>
                </button>
              </Link>
            </li>
            <li>
            <Link to={"/profile"}>
              <button>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="40"
                  height="40"
                  viewBox="0 0 40 40"
                  fill="none"
                >
                  <path
                    d="M18.6191 35.3162C19.1929 35.303 19.7436 35.0873 20.1737 34.7072C20.6038 34.3271 20.8856 33.8071 20.9693 33.2393H16.1777C16.2638 33.8226 16.5588 34.3547 17.0079 34.7368C17.457 35.1188 18.0295 35.3247 18.6191 35.3162Z"
                    fill="#00A69C"
                  />
                  <path
                    d="M32.1463 29.7142L31.8366 29.4409C30.9579 28.658 30.1888 27.7602 29.5501 26.7718C28.8525 25.4077 28.4344 23.918 28.3203 22.3901V17.89C28.3166 17.3434 28.2679 16.798 28.1746 16.2594C26.6315 15.9423 25.2455 15.1016 24.2511 13.8798C23.2567 12.658 22.7151 11.1301 22.718 9.55482V8.98092C21.7669 8.51287 20.745 8.20507 19.6936 8.06997V6.92217C19.6936 6.59964 19.5655 6.29031 19.3374 6.06225C19.1094 5.83418 18.8 5.70605 18.4775 5.70605C18.155 5.70605 17.8456 5.83418 17.6176 6.06225C17.3895 6.29031 17.2614 6.59964 17.2614 6.92217V8.11552C14.9072 8.44761 12.7527 9.62018 11.1956 11.4167C9.63844 13.2133 8.78384 15.5126 8.78955 17.89V22.3901C8.67546 23.918 8.25736 25.4077 7.55977 26.7718C6.93202 27.7578 6.1753 28.6554 5.30972 29.4409L5 29.7142V32.283H32.1463V29.7142Z"
                    fill="#00A69C"
                  />
                  <path
                    d="M29.5499 14.1095C32.0654 14.1095 34.1046 12.0703 34.1046 9.55475C34.1046 7.03923 32.0654 5 29.5499 5C27.0343 5 24.9951 7.03923 24.9951 9.55475C24.9951 12.0703 27.0343 14.1095 29.5499 14.1095Z"
                    fill="#C22A3C"
                  />
                </svg>
              </button>
              </Link>
            </li>
            <li>
                <button onClick={handleButtonClick}>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="35"
                    height="32"
                    viewBox="0 0 35 32"
                    fill="none"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M0.203125 31.8967L2.67874 0.421057C4.56492 0.421057 8.69094 0.91618 10.1056 2.89667L7.62996 29.4211C6.21533 30.4821 2.74947 32.4626 0.203125 31.8967ZM16.8251 18.8113C14.2787 25.8845 9.63403 28.8317 7.62996 29.4211V31.8967C10.1089 32.4625 14.3214 30.4821 16.1178 29.4211V31.8967C26.0202 32.2161 34.335 23.0346 34.1544 15.6284C33.8714 4.02839 22.7194 0.185289 17.8861 0.421057V2.89667C16.1885 0.633252 11.9918 0.303171 10.1056 0.421057V2.89667C16.047 6.29178 17.2652 11.856 17.1316 14.2138L17.8861 2.89667C23.5446 5.443 26.0202 8.92956 26.0202 15.6284C26.0202 22.3272 18.5934 28.0065 16.1178 29.4211L16.8251 18.8113Z"
                      fill="#00A69C"
                    />
                  </svg>
                </button>
            </li>
          </ul>
        </div>
      </Container>
    </header>
  );
};

export default Header;
